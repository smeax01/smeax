---
import BaseLayout from './BaseLayout.astro';
import type { Language } from '../i18n/translations';

const { frontmatter } = Astro.props;
const lang: Language = frontmatter.lang || 'fr';
---

<BaseLayout title={frontmatter.title} lang={lang}>
  <article class="max-w-3xl mx-auto py-12 px-4 markdown-content">
    {frontmatter.image && (
      <img 
        src={frontmatter.image.startsWith('/') ? `${import.meta.env.BASE_URL}${frontmatter.image}` : frontmatter.image} 
        alt={frontmatter.title}
        class="w-full h-64 object-cover rounded-2xl mb-8 border border-white/10"
      />
    )}
    
    <div class="space-y-4 mb-12">
      <h1 class="text-4xl md:text-5xl font-bold text-adaptive tracking-tight">
        {frontmatter.title}
      </h1>
      {frontmatter.description && (
        <p class="text-xl text-muted-adaptive font-medium">
          {frontmatter.description}
        </p>
      )}
      <div class="flex items-center gap-4 text-sm text-muted-adaptive">
        {frontmatter.date && <time datetime={frontmatter.date}>{new Date(frontmatter.date).toLocaleDateString(lang === 'fr' ? 'fr-FR' : 'en-US', { dateStyle: 'long' })}</time>}
      </div>
    </div>

    <div class="prose-custom">
      <slot />
    </div>
  </article>
</BaseLayout>

<style is:global>
  /* Base styles for Markdown content */
  .prose-custom {
    color: var(--text-main);
    line-height: 1.7;
  }
  .prose-custom h2 {
    font-size: 1.875rem;
    font-weight: 700;
    margin-top: 2.5rem;
    margin-bottom: 1.25rem;
    color: var(--text-main);
  }
  .prose-custom h3 {
    font-size: 1.5rem;
    font-weight: 600;
    margin-top: 2rem;
    margin-bottom: 1rem;
    color: var(--text-main);
  }
  .prose-custom p {
    margin-bottom: 1.25rem;
  }
  .prose-custom ul, .prose-custom ol {
    margin-bottom: 1.25rem;
    padding-left: 1.5rem;
  }
  .prose-custom ul {
    list-style-type: disc;
  }
  .prose-custom ol {
    list-style-type: decimal;
  }
  .prose-custom li {
    margin-bottom: 0.5rem;
  }
  .prose-custom blockquote {
    border-left: 4px solid var(--border-color);
    padding-left: 1rem;
    font-style: italic;
    color: var(--text-muted);
    margin: 1.5rem 0;
  }
  .prose-custom code {
    background: rgba(255, 255, 255, 0.05);
    padding: 0.2rem 0.4rem;
    border-radius: 0.3rem;
    font-size: 0.9em;
  }
  .prose-custom pre {
    background: #0f172a !important;
    padding: 1rem;
    border-radius: 0.75rem;
    overflow-x: auto;
    margin: 1.5rem 0;
    border: 1px solid rgba(255, 255, 255, 0.1);
  }
</style>
